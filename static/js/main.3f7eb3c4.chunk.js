(this["webpackJsonpbucketlist-app"]=this["webpackJsonpbucketlist-app"]||[]).push([[0],{117:function(t,e,a){t.exports=a(145)},122:function(t,e,a){},140:function(t,e,a){},145:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(12),s=a.n(o),c=(a(122),a(83)),i=a(13),u=a(103),d=Object(u.a)({palette:{primary:{main:"#00897b"},secondary:{main:"#c0ca33"},contrastThreshold:3,tonalOffset:.2,background:{paper:"#f4f4f4"}}}),l=a(200),f=a(17),h=a.n(f),b=a(33),p=a(27),m=a(28),k=a(55),v=a(106),g=a(104),O=a(4),j=a(7),S=a(20),y=a(16),E=a(97),_="https://kind-gold-armadillo-sari.cyclic.app/bucket-list-api";var x={base:_,bucketList:function(){return"".concat(_,"/list")},purgeDatabase:function(){return"".concat(_,"/cron/purge")},createBucket:function(){return"".concat(_,"/create")},updateBucketStatus:function(t){return"".concat(_,"/").concat(t,"/update-status")},updateBucketOnlyStatus:function(t){return"".concat(_,"/").concat(t,"/bucket-only-update-status")},createSubtask:function(t){return"".concat(_,"/").concat(t,"/rel/subtask/create")},updateSubtaskStatus:function(t){return"".concat(_,"/rel/subtask/").concat(t,"/update-status")}},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter((function(t){return"completed"===t.status})).length===t.length&&t.length>0},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter((function(t){return"pending"===t.status})).length===t.length&&t.length>0},T=function(){var t=Object(b.a)(h.a.mark((function t(e){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=4;break}return t.abrupt("return",e.json());case 4:return t.prev=4,t.next=7,e.json();case 7:a=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),a=t.t0.toString();case 13:if(!Object(j.e)(a)){t.next=17;break}return t.abrupt("return",Promise.reject(a.error||a.message));case 17:Promise.reject(a||"HTTP-Error: "+a.status);case 18:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,n=Object(E.a)(Object.entries(e).values());try{for(n.s();!(t=n.n()).done;){var r=Object(y.a)(t.value,2),o=r[0],s=r[1];a[o]&&(a[o]=s)}}catch(c){n.e(c)}finally{n.f()}return a},B=function(t){return{method:"POST",headers:Object(S.a)(Object(S.a)({},{"Function-Code":"DFKJ884576*_35465fdjfuyrt+_*45@%_=_*56%@!~^"}),{},{"Content-Type":"application/json;charset=utf-8"}),body:JSON.stringify(t)}},D=a(98);Object(D.a)({basename:"https://eag1ex.github.io/bucket-list-app-client"});Object(O.d)({enforceActions:"never"});var U=function(){function t(e){var a=this,n=e.todo_id,r=e.title,o=e.status,s=e.created_at;Object(p.a)(this,t),this.todo_id="",this.status="",this.title="",this.created_at="",this.finished=!1,this.error="",Object(O.f)(this,{todo_id:O.g,status:O.g,title:O.g,error:O.g,finished:O.g,toggle:O.b,updateSubtask:O.b}),r&&n&&o&&s?(this.error="",this.todo_id=n,this.title=r,this.status=o,this.created_at=s):(this.error="new Subtask missing some props",Object(j.j)("[Subtask]",this.error)),"completed"===this.status&&(this.finished=!0),Object(O.h)(this,"status",(function(t){"completed"===t.newValue&&(a.finished=!0),Object(j.f)("[subtask]","is ".concat(t.newValue))}))}return Object(m.a)(t,[{key:"toggle",value:function(){this.finished=!this.finished,this.status=this.finished?"completed":"pending"}},{key:"updateSubtask",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object(j.a)(e),Object(O.i)((function(){e.title&&(t.title=e.title),e.created_at&&(t.created_at=e.created_at),e.status&&(t.status=e.status)}))}}]),t}();Object(O.d)({enforceActions:"never"});var P=function(){function t(e){var a=this,n=e.id,r=e.title,o=e.status,s=e.created_at,c=e.subtasks;Object(p.a)(this,t),this.id="",this.status="",this.title="",this.created_at="",this.subtasks=[],this.finished=!1,this.error="",this.reopenStatus=!1,Object(O.f)(this,{id:O.g,status:O.g,title:O.g,subtasks:O.g,error:O.g,finished:O.g,toggle:O.b,onUpdate:O.b,reopenStatus:O.g}),r&&n&&o&&s?(this.error="",this.id=n,this.title=r,this.status=o,this.created_at=s,this.subtasks=(c||[]).length?Object(j.a)(c).map((function(t){return new U(t)})):[],this.subtasks.sort((function(t,e){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}))):(this.error="new Bucket missing some props",Object(j.j)("[Bucket]",this.error)),"completed"===this.status&&(this.finished=!0,this.reopenStatus=!1),"completed"!==this.status||this.subtasks.length||(this.status="pending",this.finished=!1,this.reopenStatus=!1),Object(O.h)(this,"status",(function(t){a.reopenStatus||a.setSubTasksStatus(t.newValue)})),Object(O.h)(this,"subtasks",(function(t){w(t.newValue)?Object(O.i)((function(){a.status="completed",a.finished=!0,Object(j.f)("[tasksCompleted]","bucket is complete")})):N(t.newValue)&&Object(O.i)((function(){a.status="pending",a.finished=!1,Object(j.f)("[tasksPending]","bucket is pending")}))}))}return Object(m.a)(t,[{key:"toggle",value:function(){if(this.subtasks.length)return this.finished=!this.finished,this.status=this.finished?"completed":"pending",this.finished}},{key:"addSubtask",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e=Object(j.a)(e),Object(O.i)((function(){var a=new U(e);a.error?Object(j.j)("[addSubtask]","subtask not added"):t.subtasks.push(a)}))}},{key:"onUpdate",value:function(t,e,a){var n=this;"addSubtask"!==a||"subtask"!==e?"statusChange"===a&&"subtask"===e&&Object(O.i)((function(){if(n.setSubTasksStatus(t.status,t.todo_id),"completed"===n.status&&!w(n.subtasks))return n.reopenStatus=!0,n.status="pending",n.finished=!1,void(n.reopenStatus=!1);w(n.subtasks)&&(n.status="completed",n.finished=!0),N(n.subtasks)&&(n.status="pending",n.finished=!1)})):Object(O.i)((function(){"completed"===n.status&&(n.reopenStatus=!0,Object(j.c)(300).then((function(){n.finished=!1,n.status="pending",n.reopenStatus=!1})))}))}},{key:"setSubTasksStatus",value:function(t,e){var a=this;"completed"!==t&&"pending"!==t||Object(O.i)((function(){a.subtasks=a.subtasks.map((function(a){return void 0===e?(a.status=t,a.finished="completed"===t,a):(e===a.todo_id&&(a.status=t,a.finished="completed"===t),a)}))}))}}]),t}(),A=a(84);Object(O.d)({enforceActions:"never"});var I=function(){function t(e,a){var n=this,r=a.id,o=a.entity;Object(p.a)(this,t),this.todos=[],this.state="pending",this.id="",Object(O.f)(this,{id:O.g,state:O.g,todos:O.g,unfinishedCount:O.c,finishedCount:O.c,addNewBucket:O.b,addNewSubTask:O.b}),this.entity=o,this.id=r,"BucketStore"===this.entity&&(this.todos=e.map((function(t){return new P(t)})).filter((function(t){return!t.error})),this.state="ready"),"SubTaskStore"===this.entity&&(this.todos=e.map((function(t){return new U(t)})).filter((function(t){return!t.error})),this.state="ready"),Object(O.h)(this,"todos",(function(t){Object(j.f)("[".concat(n.entity,"][todos][updated]"))})),Object(O.h)(this,"state",(function(t){Object(j.f)("[".concat(n.entity,"][state]"),t.newValue)}))}return Object(m.a)(t,[{key:"unfinishedCount",get:function(){return this.todos.filter((function(t){return!t.finished})).length}},{key:"finishedCount",get:function(){return this.todos.filter((function(t){return t.finished})).length}},{key:"deleteExecCron",value:function(){}},{key:"taskByID",value:function(t){if("SubTaskStore"===this.entity){var e=this.todos.find((function(e){return e.todo_id===t}));if(e instanceof U)return e}if("BucketStore"===this.entity){var a=this.todos.find((function(e){return e.id===t}));if(a instanceof P)return a}}},{key:"addNewBucket",value:function(t,e){var a=this,n=t.title;if("BucketStore"!==this.entity)throw new Error("not allowed performing task/addNewBucket on entity:".concat(this.entity));try{if(!n)return void Object(j.j)("Bucket not added, {title} missing");var r=new P(function(t){var e=t.title;return{id:Object(A.v4)(),title:e,status:"pending",created_at:new Date,subtasks:[]}}({title:n})),o=r.id;return Object(O.i)((function(){a.todos.push(r),Object(j.d)(e)&&e(r).then((function(t){a.todos.forEach((function(e,n){e.id===o&&(e=C(t,e),a.todos[n]=e,Object(j.f)("[addNewBucket][lazyUpdate][done]"))}))})).catch(j.h)})),r}catch(s){Object(j.h)(s)}}},{key:"addNewSubTask",value:function(t,e){var a=this,n=t.title;if("SubTaskStore"!==this.entity)throw new Error("not allowed performing task/addSubTask on entity:".concat(this.entity));try{if(!n)return void Object(j.j)("[addNewSubTask]","subtask not added, {title} missing");var r=new U(function(t){var e=t.title;return{todo_id:Object(A.v4)(),title:e,status:"pending",created_at:new Date}}({title:n})),o=r.todo_id;return Object(O.i)((function(){a.todos.push(r),Object(j.d)(e)&&e(r).then((function(t){a.todos.forEach((function(e){e.todo_id===o&&(e=C(t,e))}))})).catch(j.h)})),r}catch(s){Object(j.h)("[addSubTask]",s)}}}]),t}();Object.freeze(x);var F=function(t){Object(v.a)(a,t);var e=Object(g.a)(a);function a(){var t;return Object(p.a)(this,a),t=e.call(this),Object(O.f)(Object(k.a)(t),{todoData:O.g,state:O.g,onUpdate:O.b,fetch_bucketListGet:O.b}),t.fetch_bucketListGet(),Object(O.h)(Object(k.a)(t),"todoData",(function(t){Object(j.f)("[todoData][updated]")})),t}return Object(m.a)(a,[{key:"onUpdate",value:function(){var t=Object(b.a)(h.a.mark((function t(){var e,a,n,r,o,s,c,i,u,d,l,f,p=this,m=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=m.length>0&&void 0!==m[0]?m[0]:{},a=m.length>1?m[1]:void 0,n=m.length>2?m[2]:void 0,r=m.length>3?m[3]:void 0,o=m.length>4?m[4]:void 0,s=m.length>5?m[5]:void 0,c=["homeComponent","bucket","subtask"],s||(s=function(){}),i=function(){var t=Object(b.a)(h.a.mark((function t(c){var i,u,d,l,f;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i={},t.t0=c,t.next="homeComponent"===t.t0?4:"bucket"===t.t0?10:"subtask"===t.t0?17:42;break;case 4:if("addBucket"!==r){t.next=9;break}return t.next=7,p.addBucket_and_fetch(e);case 7:t.sent?s(!0):i={fail:!0,message:"addBucket_and_fetch no completed"};case 9:return t.abrupt("break",43);case 10:if("statusChange"!==r){t.next=16;break}return t.next=14,p.fetch_updateBucketStatusPost({status:e.status},a);case 14:(u=t.sent)?p._updateBucket(u,a,o):i={fail:!0,message:"fetch_updateBucketStatusPost not complete"};case 16:return t.abrupt("break",43);case 17:if("statusChange"!==r){t.next=33;break}return t.next=20,p.fetch_updateSubtaskStatusPost({status:e.status},a);case 20:if(!(d=t.sent)){t.next=32;break}return p._updateSubtask(d,a,o),l=o.id,f=w(o.todos)?"completed":"pending",t.next=27,p.fetch_updateBucketOnlyStatus({status:f},l);case 27:if(t.sent){t.next=29;break}i={fail:!0,message:"fetch_updateSubtaskStatusPost > fetch_updateBucketOnlyStatus not complete"};case 29:s(!0),t.next=33;break;case 32:i={fail:!0,message:"fetch_updateSubtaskStatusPost not complete"};case 33:if("addSubtask"!==r){t.next=41;break}return t.next=36,p.addSubtask_and_fetch(e,o);case 36:if(!t.sent){t.next=40;break}s(!0),t.next=41;break;case 40:i={fail:!0,message:"addSubtask not complete"};case 41:return t.abrupt("break",43);case 42:i={fail:!0,message:"no entity matched for: ".concat(n)};case 43:return i||(i={pass:!0}),t.abrupt("return",i);case 45:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=0,d=c;case 10:if(!(u<d.length)){t.next=19;break}if((l=d[u])===n){t.next=14;break}return t.abrupt("continue",16);case 14:(f=i(l))&&f.fail&&Object(j.h)("[MobXStore][onUpdate]",f.message);case 16:u++,t.next=10;break;case 19:Object(j.f)("[MobXStore][onUpdate]","[data][id][entity][childStore][eventName][?onDone]");case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"addBucket_and_fetch",value:function(){var t=Object(b.a)(h.a.mark((function t(e){var a,n,r=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.title,t.next=3,this.childStoresAvailable.bucketStore.promise;case 3:if(!(this.childstores.bucketStore instanceof I)){t.next=6;break}return n=this.childstores.bucketStore.addNewBucket({title:a},(function(t){var e=t.title;return r.fetch_createBucketPost({title:e}).then((function(t){return t||Promise.reject("addBucket,No data available")})).catch(j.h)})),t.abrupt("return",n);case 6:return t.abrupt("return",!1);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"addSubtask_and_fetch",value:function(){var t=Object(b.a)(h.a.mark((function t(e,a){var n,r,o,s=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.title,!(a instanceof I&&"SubTaskStore"===a.entity)){t.next=5;break}return r=a.id,o=a.addNewSubTask({title:n},(function(t){var e=t.title;return s.fetch_createSubtaskPost({title:e},r).then((function(t){return t||Promise.reject("addSubtask, No data available")})).catch(j.h)})),t.abrupt("return",o);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}]),a}(function(){function t(){Object(p.a)(this,t),this.todoData=[],this.state="pending",this.childStoresAvailable={bucketStore:Object(j.i)()},this.childstores={bucketStore:null},Object(O.f)(this.childStoresAvailable,{bucketStore:O.g})}return Object(m.a)(t,[{key:"fetch_bucketListGet",value:function(){var t=this;return this.state="pending",this.todoData=[],Object(j.b)("[fetch]",x.bucketList()),fetch(x.bucketList(),{method:"GET",headers:Object(S.a)(Object(S.a)({},{"Function-Code":"DFKJ884576*_35465fdjfuyrt+_*45@%_=_*56%@!~^"}),{},{"Content-Type":"application/json;charset=utf-8"})}).then(T).then((function(e){var a=e.response;e.code;Object(O.i)((function(){t.todoData=a||[],t.todoData.sort((function(t,e){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()})),t.state="ready"}))})).catch((function(e){Object(O.i)((function(){-1!==["NO_TOKEN","NOT_AUTHENTICATED"].indexOf(e)?t.state="no_auth":t.state="error"})),Object(j.h)("[fetch_bucketListGet]",e)}))}},{key:"fetch_createBucketPost",value:function(t){var e=this,a=t.title;return Object(j.b)("[fetch]",x.createBucket()),fetch(x.createBucket(),B({title:a})).then(T).then((function(t){var a=t.response;t.code;return Object(O.i)((function(){e.todoData.push(a)})),a})).catch((function(t){Object(O.i)((function(){-1!==["NO_TOKEN","NOT_AUTHENTICATED"].indexOf(t)&&(e.state="no_auth")})),Object(j.h)("[fetch_createBucketPost]",t)}))}},{key:"fetch_createSubtaskPost",value:function(t,e){var a=this,n=t.title;return Object(j.b)("[fetch]",x.createSubtask(e)),fetch(x.createSubtask(e),B({title:n})).then(T).then((function(t){var n=t.response;t.code;return Object(O.i)((function(){a.todoData=(a.todoData||[]).map((function(t){return t.id===e&&(t=n),t})),a._addSubToBucket(n,e)})),n})).catch((function(t){Object(O.i)((function(){-1!==["NO_TOKEN","NOT_AUTHENTICATED"].indexOf(t)&&(a.state="no_auth")})),Object(j.h)("[fetch_createSubtaskPost]",t)}))}},{key:"fetch_updateBucketStatusPost",value:function(t,e){var a=this,n=t.status;return Object(j.b)("[fetch]",x.updateBucketStatus(e)),fetch(x.updateBucketStatus(e),B({status:n})).then(T).then((function(t){var n=t.response;t.code;return Object(O.i)((function(){a.todoData=a.todoData.map((function(t){return t.id===e&&(t=n),t}))})),n})).catch((function(t){Object(O.i)((function(){-1!==["NO_TOKEN","NOT_AUTHENTICATED"].indexOf(t)&&(a.state="no_auth")})),Object(j.h)("[fetch_updateBucketStatusPost]",t)}))}},{key:"fetch_updateBucketOnlyStatus",value:function(t,e){var a=this,n=t.status;return Object(j.b)("[fetch]",x.updateBucketOnlyStatus(e)),fetch(x.updateBucketOnlyStatus(e),B({status:n})).then(T).then((function(t){var n=t.response;t.code;return Object(O.i)((function(){a.todoData=a.todoData.map((function(t){return t.id===e&&Object.entries(n).forEach((function(e){var a=Object(y.a)(e,2),n=a[0],r=a[1];t[n]&&(t[n]=r)})),t}))})),n})).catch((function(t){Object(O.i)((function(){-1!==["NO_TOKEN","NOT_AUTHENTICATED"].indexOf(t)&&(a.state="no_auth")})),Object(j.h)("[fetch_updateBucketOnlyStatus]",t)}))}},{key:"fetch_updateSubtaskStatusPost",value:function(t,e){var a=this,n=t.status;return Object(j.b)("[fetch]",x.updateSubtaskStatus(e)),fetch(x.updateSubtaskStatus(e),B({status:n})).then(T).then((function(t){var n=t.response;t.code;return Object(O.i)((function(){a.todoData=a.todoData.map((function(t){return t.id===e&&(t=n),t}))})),n})).catch((function(t){Object(O.i)((function(){-1!==["NO_TOKEN","NOT_AUTHENTICATED"].indexOf(t)&&(a.state="no_auth")})),Object(j.h)("[updateSubtaskStatusPost]",t)}))}},{key:"_addSubToBucket",value:function(t,e){this.childstores.bucketStore instanceof I&&(this.childstores.bucketStore.todos=this.childstores.bucketStore.todos.map((function(a){return a.id===e&&a instanceof P&&a.addSubtask(t),a})))}},{key:"_updateBucket",value:function(t,e,a){a instanceof I&&(a.todos=a.todos.map((function(a){return a.id===e&&a instanceof P&&(a=C(t,a)),a})))}},{key:"_updateSubtask",value:function(t,e,a){a instanceof I&&(a.todos=a.todos.map((function(a){return a instanceof U&&a.todo_id===e&&a.updateSubtask(t),a})))}}]),t}()),z=a(185),H=a(187),K=a(189),G=a(59),L=a(148),J=a(99),V=a.n(J),M=a(73),R=a(206),X=a(100),Y=a.n(X),q=Object(z.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1}}}));var Q=function(t){var e=t.mobxstore,a=r.a.useState(""),n=Object(y.a)(a,2),o=n[0],s=n[1];Object(M.delay)(3e3).then((function(){s("Johndoe")}));var c=q();return r.a.createElement("div",{className:c.root},r.a.createElement(H.a,{position:"static"},r.a.createElement(K.a,null,r.a.createElement(L.a,{edge:"start",className:c.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(V.a,null)),r.a.createElement(G.a,{variant:"h6",className:c.title},"Bucket List"),o&&"ready"===e.state?r.a.createElement(R.a,{avatar:r.a.createElement(Y.a,null),className:"nav-avatar",label:o,clickable:!0,variant:"outlined"}):null)))},W=(a(140),a(40)),Z=a(190),$=a(203),tt=Object(z.a)((function(t){return{root:{width:"100%","& > * + *":{marginTop:t.spacing(2)}}}}));function et(t){var e=tt(),a=t.type,n=t.value;return n?r.a.createElement("div",{className:e.root+" mx-1"},"error"===a?r.a.createElement($.a,{severity:"error"},n):"warning"===a?r.a.createElement($.a,{severity:"warning"},n):"info"===a?r.a.createElement($.a,{severity:"info"},n):"success"===a?r.a.createElement($.a,{severity:"success"},n):null):null}var at=function(t){return Object(W.a)((function(e){var a=e.mobxstore;e.basename;return"no_auth"===a.state?r.a.createElement(i.a,{to:"/session-expired"}):"error"===a.state?r.a.createElement(et,{type:"error",value:"No data from server"}):"ready"===a.state?r.a.createElement(t,{mobxstore:a}):r.a.createElement("div",{className:"d-flex justify-content-center align-items-center m-5 p-2"},r.a.createElement(Z.a,{color:"inherit",size:20}))}))},nt=a(201),rt=a(191),ot=a(101),st=a.n(ot);function ct(t){var e=t.actionAdd,a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(z.a)((function(e){return{root:Object(S.a)(Object(S.a)({"& > *":{margin:e.spacing(1)}},t.style?t.style:{}),{},{backgroundColor:e.palette.background.paper}),extendedIcon:{marginRight:e.spacing(1)}}}))()}({style:t.style});return r.a.createElement("div",{className:a.root},r.a.createElement(rt.a,{color:"primary","aria-label":"add"},r.a.createElement(st.a,{onClick:function(t){e&&e(),t.stopPropagation(),t.preventDefault()}})))}function it(t){var e=t.className,a=t.entity,n=t.add,o=t.childStore,s=t.text,c=t.style,i=t.variantName,u=void 0===i?"outlined":i,d=(t.value,t.onUpdate),l=t.id,f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(z.a)((function(e){return{root:Object(S.a)({backgroundColor:e.palette.background.paper,"& > *":{margin:e.spacing(1),width:"25ch"},"& .outlined-basic.form-control":{background:"transparent"}},t.style?t.style:{})}}))()}({style:c}),h=r.a.useState(""),b=Object(y.a)(h,2),p=b[0],m=b[1];return r.a.createElement("form",{value:p,onChange:function(t){var e=t.target.value||"";m(e)},onSubmit:function(t){var e="subtask"===a?"addSubtask":"addBucket";return(p||"").length>1?d({title:p},l,a,e,o,(function(){m("")})):Object(j.j)("[Input]","title is too short"),t.stopPropagation(),t.preventDefault(),!1},className:f.root+" "+e,noValidate:!0,autoComplete:"off"},r.a.createElement(r.a.Fragment,null,n?r.a.createElement("div",{className:"input-group mb-3 mr-1"},r.a.createElement(nt.a,{value:p,className:"outlined-basic form-control ",label:s,variant:u}),r.a.createElement(ct,{actionAdd:function(){var t="subtask"===a?"addSubtask":"addBucket";(p||"").length>1?d({title:p},l,a,t,o,(function(){m("")})):Object(j.j)("[Input]","title is too short")},style:{"& .MuiFab-root":{width:"34px",height:"34px"}}})):r.a.createElement(nt.a,{value:p,className:"outlined-basic",label:s,variant:u})))}var ut=a(199),dt=a(202),lt=a(205),ft=a(193),ht=a(195),bt=a(194),pt=a(102),mt=a.n(pt),kt=Object(z.a)((function(t){return{root:{width:"100%"},heading:{fontSize:t.typography.pxToRem(15),flexBasis:"85%",margin:"0px",flexShrink:0},secondaryHeading:{fontSize:"smaller",paddingTop:"0.75rem!important",color:t.palette.text.secondary,flexShrink:0,flexBasis:"15%"}}}));function vt(t){var e=t.SubTasks,a=t.Check,n=t.item,o=t.finishedCount,s=kt();return r.a.createElement("div",{className:s.root},r.a.createElement(lt.a,{className:"px-2 mb-2 accordion-wrap"},r.a.createElement(ft.a,{expandIcon:r.a.createElement(mt.a,null),"aria-label":"Expand","aria-controls":"additional-actions1-content",id:"additional-actions1-header"},r.a.createElement(bt.a,{className:s.heading,"aria-label":"Acknowledge",onClick:function(t){return t.stopPropagation()},onFocus:function(t){return t.stopPropagation()},control:r.a.createElement(a,null),label:n.title}),r.a.createElement(G.a,{className:s.secondaryHeading},"Done ",o,"/",n.subtasks.length," ")),r.a.createElement(ht.a,null,r.a.createElement(r.a.Fragment,null,e?r.a.createElement(e,null):"no details as yet"))))}var gt=a(192),Ot=a(204),jt=a(196),St=a(197),yt=a(198),Et=Object(z.a)((function(t){return{root:{backgroundColor:t.palette.background.paper}}})),_t=Object(W.a)((function(t){var e=t.todo,a=t.inx,n=t.onUpdate,o=t.subTaskStore,s=t.currentCount,c=t.onCurrentCount,i=r.a.useState(!1),u=Object(y.a)(i,2),d=u[0],l=u[1];r.a.useEffect((function(){d||(s(o.finishedCount),l(!0))}),[d,s,o.finishedCount]);var f="subtask-item checkbox-list-label-".concat(a);return r.a.createElement(jt.a,{key:e.todo_id,role:void 0,dense:!0,button:!0,onClick:function(t){e.toggle(),n(e,e.todo_id,"subtask","statusChange",o),c(),t.stopPropagation()}},r.a.createElement(St.a,null,r.a.createElement(Ot.a,{edge:"start",checked:e.finished,tabIndex:-1,inputProps:{"aria-labelledby":f}})),r.a.createElement(yt.a,{id:f,primary:e.title}))})),xt=Object(W.a)((function(t){var e=t.subTaskStore,a=t.inx,n=t.onUpdate,o=t.currentCount,s=t.onCurrentCount,c=Et();return r.a.createElement(gt.a,{className:c.root+" m-auto subtask-list"},e.todos.map((function(t){return r.a.createElement(_t,{onCurrentCount:s,currentCount:o,todo:t,key:t.todo_id,inx:a,onUpdate:n,subTaskStore:e})})),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center flex-row subtask-item"},r.a.createElement(it,{variantName:"standard",text:"Add Task",style:{"& input":{padding:"3px 0 5px"}},id:e.id,entity:"subtask",childStore:e,onUpdate:n,add:!0})))})),wt=function(t){var e=t.subtasks,a=t.id,n=t.onUpdate,o=t.onCurrentCount,s=t.currentCount,c=new I(e||[],{id:a,entity:"SubTaskStore"});return r.a.createElement(xt,{currentCount:s,onCurrentCount:function(){return o(c.finishedCount)},subTaskStore:c,onUpdate:n})},Nt=Object(z.a)((function(t){return{root:{width:"100%",backgroundColor:t.palette.background.paper}}})),Tt=Object(W.a)((function(t){var e=t.todo,a=t.onUpdate,n=t.mobxstore,o=t.bucketStore;e.finished;var s=r.a.useState(0),c=Object(y.a)(s,2),i=c[0],u=c[1],d=function(t){return u(t)};return r.a.createElement("div",{className:"d-flex justify-content-center m-auto px-3 py-2 bucket-item"},r.a.createElement(vt,{Check:function(){return r.a.createElement(Ot.a,{onClick:function(t){var n=e.toggle()?"completed":"pending",r=o.taskByID(e.id).subtasks.length?"statusChange":"statusNoChange";a({status:n},e.id,"bucket",r,o),t.stopPropagation()},checked:e.finished,edge:"start"})},item:e,finishedCount:i,SubTasks:function(){return r.a.createElement(wt,{onCurrentCount:d,currentCount:function(t){return d(t)},mobxstore:n,subtasks:e.subtasks||[],id:e.id,onUpdate:function(t,n,r,o,s,c){e.onUpdate(t,r,o),a(t,n,"subtask",o,s,c)}})}}))})),Ct=Object(W.a)((function(t){var e=t.bucketStore,a=t.mobxstore,n=t.onUpdate,o=r.a.useState(0),s=Object(y.a)(o,2),c=s[0],i=s[1],u=Nt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(gt.a,{className:u.root+" m-auto bucket-list"},(e.todos||[]).length?e.todos.map((function(t){return r.a.createElement(Tt,{todo:t,key:t.id,onUpdate:n,mobxstore:a,bucketStore:e})})):r.a.createElement(et,{type:"info",value:"Add a new bucket list :)"}),(e.todos||[]).length&&e.unfinishedCount?r.a.createElement(et,{type:"info",value:"Tasks left: "+e.unfinishedCount}):(e.todos||[]).length&&!e.unfinishedCount?r.a.createElement(et,{type:"success",value:"All done!"}):null),r.a.createElement(dt.a,{style:{width:"100%",textAlign:"center",opacity:"40%"}},r.a.createElement(ut.a,{disabled:1===c,onClick:function(){i(1),(Object(j.b)("[fetch]",x.purgeDatabase()),fetch(x.purgeDatabase(),{method:"GET",headers:Object(S.a)(Object(S.a)({},{"Function-Code":"DFKJ884576*_35465fdjfuyrt+_*45@%_=_*56%@!~^"}),{},{"Content-Type":"application/json;charset=utf-8"})})).then((function(t){i(2),Object(M.delay)(1e3).then((function(t){window.location.reload()}))})).catch((function(t){i(0)}))},color:"error",variant:"outlined",size:"small",style:{color:"red",border:"1px solid red"}},"  ",1===c?r.a.createElement(Z.a,{color:"inherit",size:20}):"Delete list")))})),Bt=function(t){var e=t.mobxstore,a=t.onUpdate;if("ready"===e.state){var n=new I(e.todoData||[],{entity:"BucketStore"});return e.childstores.bucketStore=n,e.childStoresAvailable.bucketStore.resolve(!0),"ready"===n.state?r.a.createElement(Ct,{bucketStore:n,mobxstore:t.mobxstore,onUpdate:a}):"error"===n.state?r.a.createElement(et,{type:"error",value:"No data for Bucket Store"}):r.a.createElement(Z.a,{color:"inherit",size:20})}return r.a.createElement(Z.a,{color:"inherit",size:20})};var Dt=at((function(t){var e=t.mobxstore,a=function(t,a,n,r,o,s){e.onUpdate(t,a,n,r,o,s)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-8 m-auto bucket-wrap "},r.a.createElement("div",{className:"d-flex justify-content-center align-items-center m-auto"},r.a.createElement(it,{className:"bucket-add-input",variantName:"outlined",text:"New bucket",entity:"homeComponent",childStore:null,onUpdate:a,add:!0})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-7 m-auto p-4"},r.a.createElement(Bt,{mobxstore:e,onUpdate:a}))))}));Object(j.g)("log","off"),Object(j.g)("debug","off");var Ut=new F;var Pt=function(){return r.a.createElement(c.a,{basename:"https://eag1ex.github.io/bucket-list-app-client/app/"},r.a.createElement(l.a,{theme:d},r.a.createElement(Q,{mobxstore:Ut}),r.a.createElement("div",{className:"container-fluid mt-3"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/app"},r.a.createElement(i.a,{to:"/profile/johndoe"}))),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(i.a,{to:"/profile/johndoe"})}})),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/profile/:user"},r.a.createElement(Dt,{mobxstore:Ut}))),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/error",render:function(t){return r.a.createElement(et,{type:"error",value:"Ups something went wrong"})}})),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/session-expired",render:function(t){return r.a.createElement(et,{type:"error",value:"Your token expired, please login again at: /login"})}})),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"*"},r.a.createElement(i.a,{to:"/profile/johndoe"}))))))};s.a.render(r.a.createElement(Pt,null),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.3f7eb3c4.chunk.js.map